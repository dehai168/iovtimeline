!function(t,i){if("object"==typeof exports&&"object"==typeof module)module.exports=i();else if("function"==typeof define&&define.amd)define([],i);else{var e=i();for(var o in e)("object"==typeof exports?exports:t)[o]=e[o]}}(window,(function(){return function(t){var i={};function e(o){if(i[o])return i[o].exports;var n=i[o]={i:o,l:!1,exports:{}};return t[o].call(n.exports,n,n.exports,e),n.l=!0,n.exports}return e.m=t,e.c=i,e.d=function(t,i,o){e.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:o})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,i){if(1&i&&(t=e(t)),8&i)return t;if(4&i&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(e.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&i&&"string"!=typeof t)for(var n in t)e.d(o,n,function(i){return t[i]}.bind(null,n));return o},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},e.p="dist/",e(e.s=0)}([function(t,i,e){t.exports=e(1)},function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.IovTimeLine=void 0;var o=e(2),n=e(3),s={Multiple:o.Multiple,Single:n.Single};i.IovTimeLine=s},function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n=function(){function t(t,i){for(var e=0;e<i.length;e++){var o=i[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(i,e,o){return e&&t(i.prototype,e),o&&t(i,o),i}}();i.Multiple=function(){function t(i,e){!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,t),this.domId=i,this.ctx=null,this.ctxDom=null,this.time="",this.timeList=[],this.asyncTimes=[],this.unit=0,this.rate=1,this.isDragFlag=!1,this.isIntevFlag=null,this.options={isSync:!1,bgColor:"#2b2f33",width:1024,height:200,topHeight:35,topBgColor:"rgba(69, 72, 76, 0.5)",mainBgColor:"#2b2f33",axisColor:"rgba(151,158,167,1)",axisWeight:1,axisTitleColor:"rgba(151,158,167,1)",axisTitleSize:12,hour:24,dottedLineWeight:.5,dottedLineColor:"rgba(7,83,168,1)",timeLineRectBgColor:"rgba(7,83,168,0.8)",timeLineSpecialRectBgColor:"rgba(255,0,0,0.5)",timePointerColor:"rgba(0,205,0,1)",timePointerTitleColor:"rgba(0,205,0,1)",timePointerTitleSize:12,timeLineRectHeight:25,fps:15,timeCb:null},this._init(e)}return n(t,[{key:"_init",value:function(t){var i=this;if(this.setOptions(t),this.domId.length>0){var e=document.getElementById(this.domId);for(e.style="display:block;padding:0px;overflow-x:auto;width:"+this.options.width+"px;";e.hasChildNodes();)e.removeChild(e.firstChild);this.ctxDom=document.createElement("canvas"),this.ctxDom.height=this.options.height,this.ctx=this.ctxDom.getContext("2d"),this._changeRate(),e.appendChild(this.ctxDom),this.isIntevFlag&&clearInterval(this.isIntevFlag),this.isIntevFlag=setInterval((function(){i._drawBase(),i._drawTimeLineRect(),i.isSync||i._drawTimeLineSyncPointer(),i._drawTimeLinePointer()}),1e3/this.options.fps),this._bindEvent()}else console.log("domid is need")}},{key:"setOptions",value:function(t){if(t)for(var i in t)if(Object.hasOwnProperty.call(t,i)){var e=t[i];this.options[i]=e}}},{key:"zoomin",value:function(){this.rate<4&&(this.rate=2*this.rate,this.options.width=this.options.width*this.rate,this._changeRate())}},{key:"zoomout",value:function(){this.rate>1&&(this.options.width=this.options.width/this.rate,this.rate=this.rate/2,this._changeRate())}},{key:"setTimes",value:function(t){t.length>0&&(this.timeList.length=0,this.timeList=t)}},{key:"setSyncTime",value:function(t){t&&(this.time=t)}},{key:"getSyncTime",value:function(){return this.time}},{key:"setAsyncTimes",value:function(t){t&&(this.asyncTimes=t)}},{key:"getAsyncTimes",value:function(){return this.asyncTimes}},{key:"_changeRate",value:function(){this.ctxDom.width=this.options.width,this.unit=3600*this.options.hour/this.options.width}},{key:"_drawBase",value:function(){this.ctx.fillStyle=this.options.bgColor,this.ctx.fillRect(0,0,this.options.width,this.options.height),this.ctx.fillStyle=this.options.topBgColor,this.ctx.fillRect(0,0,this.options.width,this.options.topHeight),this.ctx.fillStyle=this.options.mainBgColor,this.ctx.fillRect(0,this.options.topHeight,this.options.width,this.options.height-this.options.topHeight);var t=this.options.width/this.options.hour/this.rate,i=60/this.rate,e=this.options.hour*this.rate,o=0;this.ctx.beginPath(),this.ctx.strokeStyle=this.options.axisColor,this.ctx.lineWidth=this.options.axisWeight,this.ctx.fillStyle=this.options.axisTitleColor,this.ctx.font=this.options.axisTitleSize+"px Arial";for(var n=0;n<e+1;n++){this.ctx.moveTo(n*t,0);var s=n*i,r=Math.floor(s/60),h=(r=r<10?"0"+r:""+r)+":"+(s=(s=Math.floor(s%60))<10?"0"+s:""+s);if(n%2)o=5;else{o=10;var l=0;l=0===n?0:n===e?this.options.width-2.5*this.options.axisTitleSize:n*t-2.5*this.options.axisTitleSize/2,this.ctx.fillText(h,l,this.options.topHeight-o)}this.ctx.lineTo(n*t,o)}this.ctx.stroke()}},{key:"_drawTimeLineRect",value:function(){var t=this.timeList.length,i=(this.options.height-this.options.topHeight)/t,e=this.isSync?(i-this.options.timeLineRectHeight)/2:2;this.ctx.beginPath();for(var o=0;o<this.timeList.length;o++)for(var n=this.timeList[o],s=0;s<n.length;s++){var r=n[s],h=this._time2px(r.st),l=this._time2px(r.et);r.sp?this.ctx.fillStyle=this.options.timeLineSpecialRectBgColor:this.ctx.fillStyle=this.options.timeLineRectBgColor;var a=this.options.topHeight+o*i+e,c=l-h;this.ctx.fillRect(h,a,c,this.options.timeLineRectHeight)}this.ctx.beginPath(),this.ctx.lineWidth=this.options.dottedLineWeight,this.ctx.strokeStyle=this.options.dottedLineColor,this.ctx.setLineDash([8,8]);for(var u=0;u<t-1;u++){a=this.options.topHeight+(u+1)*i;this.ctx.moveTo(0,a),this.ctx.lineTo(this.options.width,a)}this.ctx.stroke(),this.ctx.setLineDash([])}},{key:"_drawTimeLineSyncPointer",value:function(){for(var t=this.timeList.length,i=(this.options.height-this.options.topHeight)/t,e=this.isSync?(i-this.options.timeLineRectHeight)/2:2,o=0;o<this.asyncTimes.length;o++){var n=this.asyncTimes[o];if(0!==n.length){var s=this._time2px(n),r=this.options.topHeight+o*i+e,h=r+this.options.timeLineRectHeight,l=0,a=4*this.options.timePointerTitleSize;l=s<a?0:s>this.options.width-a?a:4*this.options.timePointerTitleSize/2,this.ctx.beginPath(),this.ctx.strokeStyle=this.options.timePointerColor,this.ctx.moveTo(s,r),this.ctx.lineTo(s,h),this.ctx.stroke(),this.ctx.fillStyle=this.options.timePointerTitleColor,this.ctx.font=this.options.timePointerTitleSize+"px Arial bolder",this.ctx.fillText(n,s-l,h+this.options.timePointerTitleSize)}}}},{key:"_drawTimeLinePointer",value:function(){if(0!==this.time.length){var t=this._time2px(this.time),i=t,e=this.options.height,o=0,n=4*this.options.timePointerTitleSize;o=t<n?0:t>this.options.width-n?n:4*this.options.timePointerTitleSize/2,this.ctx.beginPath(),this.ctx.strokeStyle=this.options.timePointerColor,this.ctx.moveTo(t,this.options.topHeight),this.ctx.lineTo(i,e),this.ctx.stroke(),this.ctx.fillStyle=this.options.timePointerTitleColor,this.ctx.font=this.options.timePointerTitleSize+"px Arial bolder",this.ctx.fillText(this.time,t-o,this.options.topHeight)}}},{key:"_time2px",value:function(t){var i=t.split(":");return 3!==i.length?0:(3600*parseInt(i[0])+60*parseInt(i[1])+parseInt(i[2]))/this.unit}},{key:"_px2time",value:function(t){if(!(t<0)){var i=t*this.unit,e=Math.floor(i/3600),o=Math.floor(i/60%60),n=Math.floor(i%60),s=function(t){return t<10?"0"+t:""+t};return s(e)+":"+s(o)+":"+s(n)}}},{key:"_mousePoint2CxtPoint",value:function(t,i){var e=this.ctxDom.getBoundingClientRect();return{x:t-e.left,y:i-e.top}}},{key:"_bindEvent",value:function(){var t=this;this.ctxDom.onmousedown=function(i){t.isDragFlag=!0},this.ctxDom.onmousemove=function(i){if(t.isDragFlag){var e=t._mousePoint2CxtPoint(i.clientX,i.clientY);t.time=t._px2time(e.x)}},this.ctxDom.onmouseup=function(i){t.isDragFlag&&(t.isDragFlag=!1);var e=t._mousePoint2CxtPoint(i.clientX,i.clientY);t.time=t._px2time(e.x),t.options.timeCb&&t.options.timeCb(t.time)},this.ctxDom.addEventListener("mousewheel",(function(i){if(!i||!i.preventDefault)return window.event.returnValue=!1,!1;i.preventDefault();var e=window.event||i,o=Math.max(-1,Math.min(1,e.wheelDelta||-e.detail));o<0?t.zoomin():o>0&&t.zoomout()}))}},{key:"_parseTime",value:function(t,i){if(0===arguments.length||!t)return null;var e=i||"{y}-{m}-{d} {h}:{i}:{s}",n=void 0;"object"===(void 0===t?"undefined":o(t))?n=t:("string"==typeof t&&(t=/^[0-9]+$/.test(t)?parseInt(t):t.replace(new RegExp(/-/gm),"/")),"number"==typeof t&&10===t.toString().length&&(t*=1e3),n=new Date(t));var s={y:n.getFullYear(),m:n.getMonth()+1,d:n.getDate(),h:n.getHours(),i:n.getMinutes(),s:n.getSeconds(),a:n.getDay()},r=e.replace(/{([ymdhisa])+}/g,(function(t,i){var e=s[i];return"a"===i?["日","一","二","三","四","五","六"][e]:e.toString().padStart(2,"0")}));return r}}]),t}()},function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function t(t,i){for(var e=0;e<i.length;e++){var o=i[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(i,e,o){return e&&t(i.prototype,e),o&&t(i,o),i}}();i.Single=function(){function t(i,e){!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,t),this._canvas=document.getElementById(i),this._ctx=this._canvas.getContext("2d"),this._canvasWidth=this._canvas.clientWidth,this._canvasHeight=this._canvas.clientHeight,this._backgroundColor=e.backgroundColor||"#2b2f33"}return o(t,[{key:"_bindEvent",value:function(){}}]),t}()}])}));